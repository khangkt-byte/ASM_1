@model InvoiceSummaryViewModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <title>Hóa đơn @Model.InvoiceCode</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 2rem; }
        .invoice-header { border-bottom: 2px solid #0d6efd; margin-bottom: 1.5rem; padding-bottom: 1rem; }
        .invoice-footer { border-top: 1px dashed #ccc; margin-top: 2rem; padding-top: 1rem; font-size: 0.9rem; color: #6c757d; }
        @media print {
            .no-print { display: none !important; }
            body { margin: 0; }
        }
    </style>
</head>
<body>
    <div class="d-flex justify-content-between align-items-center invoice-header">
        <div>
            <h1 class="h4 mb-1">Hóa đơn thanh toán</h1>
            <div class="text-muted">Mã hóa đơn: <strong>@Model.InvoiceCode</strong></div>
            <div class="text-muted">Ngày tạo: @Model.CreatedDate.ToLocalTime().ToString("HH:mm dd/MM/yyyy")</div>
        </div>
        <div class="text-end">
            @if (Model.IsPrepaid)
            {
                <span class="badge bg-success">Đã thanh toán trước</span>
            }
            else
            {
                <span class="badge bg-primary">Thanh toán tại quầy</span>
            }
        </div>
    </div>

    <table class="table table-bordered align-middle">
        <thead class="table-light">
            <tr>
                <th>Món</th>
                <th class="text-center">SL</th>
                <th>Ghi chú</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Items)
            {
                <tr>
                    <td>
                        <div class="fw-semibold">@item.ItemName</div>
                        @if (item.Options.Any())
                        {
                            <div class="text-muted small">Tùy chọn: @string.Join(", ", item.Options)</div>
                        }
                    </td>
                    <td class="text-center">@item.Quantity</td>
                    <td>@item.Note</td>
                </tr>
            }
        </tbody>
    </table>

    <div class="d-flex justify-content-between align-items-center">
        <div class="fw-semibold">Tổng thanh toán:</div>
        <div class="fs-4 text-primary">@Model.FinalAmount.ToString("N0") đ</div>
    </div>

    <div class="invoice-footer">
        <div>Cảm ơn quý khách đã sử dụng dịch vụ!</div>
        <div>Vui lòng kiểm tra lại thông tin trước khi rời quầy.</div>
    </div>

    <div class="no-print mt-3">
        <button class="btn btn-outline-secondary" onclick="window.print()">
            <i class="bi bi-printer"></i> In hóa đơn
        </button>
        <a asp-action="Index" class="btn btn-link">Quay về quản lý thu ngân</a>
    </div>
</body>
</html>
